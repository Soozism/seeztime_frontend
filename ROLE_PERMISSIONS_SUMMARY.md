# ๐ ุฎูุงุตู ฺฉุงูู ุฏุณุชุฑุณโูุง ููุดโูุง ฺฉุงุฑุจุฑ - ุณุณุชู ูุฏุฑุช ุชุณฺฉ ฺฏูฺฏุง ุชฺฉ

## ๐ฏ ุฎูุงุตู ุงุฌุฑุง

ุณุณุชู ูุฏุฑุช ุชุณฺฉ ฺฏูฺฏุง ุชฺฉ ุงุฒ ฺฉ ุณุณุชู ูุฌูุฒุฏู ูู ู ุงูุนุทุงูโูพุฐุฑ ุงุณุชูุงุฏู ูโฺฉูุฏ ฺฉู ุดุงูู **6 ููุด ฺฉุงุฑุจุฑ** ู **66+ API endpoint** ูโุจุงุดุฏ. ูุฑ ููุด ุฏุงุฑุง ุณุทุญ ุฏุณุชุฑุณ ูุดุฎุต ู ฺฉูุชุฑู ุดุฏูโุง ุงุณุช.

---

## ๐ฅ ููุดโูุง ฺฉุงุฑุจุฑ ู ุฏุณุชุฑุณโูุง

### ๐ **Admin (ูุฏุฑ ุณุณุชู)**
**ุฏุณุชุฑุณ**: ฺฉุงูู ุจู ุชูุงู API ูุง
- โ ูุฏุฑุช ุชูุงู ฺฉุงุฑุจุฑุงู
- โ ุฏุณุชุฑุณ ุจู ุชูุงู ูพุฑูฺูโูุง ู ุชูโูุง
- โ ูุดุงูุฏู ุชูุงู ฺฏุฒุงุฑุดโูุง
- โ ูุฏุฑุช ุณุณุชู

### ๐ **Project Manager (ูุฏุฑ ูพุฑูฺู)**
**ุฏุณุชุฑุณ**: ูุฏุฑุช ูพุฑูฺูโูุง ู ุชูโูุง
- โ ุงุฌุงุฏ ู ูุฏุฑุช ูพุฑูฺูโูุง
- โ ูุฏุฑุช ุชูโูุง
- โ ูุดุงูุฏู ฺฏุฒุงุฑุดโูุง ูพุฑูฺู
- โ ูุฏุฑุช ุชุณฺฉโูุง ู ุงุณูพุฑูุชโูุง
- โ ูุฏุฑุช ฺฉุงุฑุจุฑุงู (ููุท Admin)

### ๐ฅ **Team Leader (ุฑูุจุฑ ุชู)**
**ุฏุณุชุฑุณ**: ูุฏุฑุช ุชู ุฎูุฏ ู ูพุฑูฺูโูุง ุชุฎุตุต ุฏุงุฏู ุดุฏู
- โ ูุฏุฑุช ุงุนุถุง ุชู
- โ ุงุฌุงุฏ ุชุณฺฉ ู ุงุณูพุฑูุช ุฏุฑ ูพุฑูฺูโูุง ุชู
- โ ูุดุงูุฏู ฺฏุฒุงุฑุดโูุง ุชู
- โ ุงุฌุงุฏ ูพุฑูฺู ุฌุฏุฏ
- โ ูุฏุฑุช ุชูโูุง ุฏฺฏุฑ

### ๐ป **Developer (ุชูุณุนูโุฏููุฏู)**
**ุฏุณุชุฑุณ**: ฺฉุงุฑ ุฑู ุชุณฺฉโูุง ูุญูู ุดุฏู
- โ ูุดุงูุฏู ู ุจูโุฑูุฒุฑุณุงู ุชุณฺฉโูุง ุฎูุฏ
- โ ุซุจุช ุฒูุงู ฺฉุงุฑ
- โ ฺฏุฒุงุฑุด ุจุงฺฏ
- โ ุงุฌุงุฏ ุชุณฺฉ ุฌุฏุฏ
- โ ูุฏุฑุช ุงุณูพุฑูุช

### ๐งช **Tester (ุชุณุชโฺฉููุฏู)**
**ุฏุณุชุฑุณ**: ูุดุงุจู Developer
- โ ุชุณุช ุชุณฺฉโูุง
- โ ฺฏุฒุงุฑุด ุจุงฺฏ
- โ ุซุจุช ุฒูุงู ุชุณุช
- โ ุงุฌุงุฏ ุชุณฺฉ ุฌุฏุฏ
- โ ูุฏุฑุช ุงุณูพุฑูุช

### ๐๏ธ **Viewer (ูุดุงูุฏูโฺฏุฑ)**
**ุฏุณุชุฑุณ**: ููุท ูุดุงูุฏู
- โ ูุดุงูุฏู ูพุฑูฺูโูุง ุชุฎุตุต ุฏุงุฏู ุดุฏู
- โ ูุดุงูุฏู ฺฏุฒุงุฑุดโูุง (ุจุฏูู ูุฑุงุด)
- โ ุงุฌุงุฏ ุง ูุฑุงุด ูุฑ ฺุฒ
- โ ุซุจุช ุฒูุงู

---

## ๐ ูุงุชุฑุณ ุฏุณุชุฑุณโูุง ฺฉูุฏ

| ุนููุงุช | Admin | Project Manager | Team Leader | Developer | Tester | Viewer |
|--------|-------|----------------|-------------|-----------|--------|--------|
| **ูุฏุฑุช ฺฉุงุฑุจุฑุงู** | โ | โ | โ | โ | โ | โ |
| **ุงุฌุงุฏ ูพุฑูฺู** | โ | โ | โ | โ | โ | โ |
| **ูุฏุฑุช ุชู** | โ | โ | ุชู ุฎูุฏ | โ | โ | โ |
| **ุงุฌุงุฏ ุชุณฺฉ** | โ | โ | ุฏุฑ ูพุฑูฺูโูุง ุชู | โ | โ | โ |
| **ูุฑุงุด ุชุณฺฉ** | โ | โ | ุฏุฑ ูพุฑูฺูโูุง ุชู | ุชุณฺฉโูุง ุฎูุฏ | ุชุณฺฉโูุง ุฎูุฏ | โ |
| **ูุฏุฑุช ุงุณูพุฑูุช** | โ | โ | ุฏุฑ ูพุฑูฺูโูุง ุชู | โ | โ | โ |
| **ุซุจุช ุฒูุงู** | โ | โ | โ | โ | โ | โ |
| **ฺฏุฒุงุฑุด ุจุงฺฏ** | โ | โ | โ | โ | โ | โ |
| **ูุดุงูุฏู ฺฏุฒุงุฑุดโูุง** | โ | โ | ุชู ุฎูุฏ | ูุญุฏูุฏ | ูุญุฏูุฏ | ูุญุฏูุฏ |
| **ูุฏุฑุช milestone** | โ | โ | ุฏุฑ ูพุฑูฺูโูุง ุชู | โ | โ | โ |

---

## ๐ ุฌุฒุฆุงุช API ูุง ุจุฑ ุงุณุงุณ ููุด

### ๐ **Authentication APIs**
- **`POST /auth/login`**: ููู ฺฉุงุฑุจุฑุงู โ
- **`POST /auth/register`**: ููู ฺฉุงุฑุจุฑุงู โ

### ๐ฅ **User Management APIs**
- **`GET /users/`**: ููุท Admin โ
- **`GET /users/me/`**: ููู ฺฉุงุฑุจุฑุงู โ
- **`PUT /users/{id}`**: Admin ุง ุฎูุฏ ฺฉุงุฑุจุฑ โ

### ๐ **Project Management APIs**
- **`GET /projects/`**: ุจุฑ ุงุณุงุณ ููุด (Admin: ูููุ Team Leader: ุชูโูุง ุฎูุฏุ Developer: ูพุฑูฺูโูุง ุฏุงุฑุง ุชุณฺฉ)
- **`POST /projects/`**: Admin, Project Manager โ
- **`PUT /projects/{id}`**: Admin, Project Manager, ุง ุงุฌุงุฏฺฉููุฏู โ

### ๐ **Task Management APIs**
- **`GET /tasks/`**: ุจุฑ ุงุณุงุณ ููุด (Admin: ูููุ Team Leader: ูพุฑูฺูโูุง ุชูุ Developer: ุชุณฺฉโูุง ูุญูู ุดุฏู)
- **`POST /tasks/`**: Admin, Project Manager, Team Leader โ
- **`PUT /tasks/{id}`**: Admin, Project Manager, Team Leader, ุง assignee โ
- **`PATCH /tasks/{id}/status`**: Admin, Project Manager, Team Leader, ุง assignee โ

### ๐โโ๏ธ **Sprint Management APIs**
- **`GET /sprints/`**: ุจุฑ ุงุณุงุณ ุฏุณุชุฑุณ ุจู ูพุฑูฺู
- **`POST /sprints/`**: Admin, Project Manager, Team Leader โ
- **`PUT /sprints/{id}`**: Admin, Project Manager, Team Leader โ

### ๐ฅ **Team Management APIs**
- **`GET /teams/`**: Admin: ูููุ Team Leader: ุชูโูุง ุชุญุช ุฑูุจุฑุ Developer: ุชูโูุง ุนุถูุช
- **`POST /teams/`**: Admin, Project Manager โ
- **`PUT /teams/{id}`**: Admin, Project Manager, ุง ุฑูุจุฑ ุชู โ

### โฑ๏ธ **Time Logging APIs**
- **`GET /time-logs/`**: Admin: ูููุ Team Leader: ุงุนุถุง ุชูุ Developer: ุฎูุฏ
- **`POST /time-logs/`**: Admin, Project Manager, Team Leader, Developer, Tester โ
- **`POST /time-logs/start-timer`**: Admin, Project Manager, Team Leader, Developer, Tester โ
- **`POST /time-logs/stop-timer`**: Admin, Project Manager, Team Leader, Developer, Tester โ

### ๐ **Bug Report APIs**
- **`GET /bug-reports/`**: ุจุฑ ุงุณุงุณ ููุด
- **`POST /bug-reports/`**: Admin, Project Manager, Team Leader, Developer, Tester โ
- **`PUT /bug-reports/{id}`**: Admin, Project Manager, Team Leader, ุง ฺฏุฒุงุฑุดโุฏููุฏู โ

### ๐ **Dashboard & Reporting APIs**
- **`GET /dashboard/dashboard`**: ููู ฺฉุงุฑุจุฑุงู โ
- **`GET /dashboard/dashboard/user/{id}`**: Admin, Project Manager (ูุฑ ฺฉุณ)ุ Team Leader (ุงุนุถุง ุชู)ุ Developer (ููุท ุฎูุฏ)

### ๐ **Advanced Queries APIs**
- **`GET /queries/tasks/by-sprint/{id}`**: ุจุฑ ุงุณุงุณ ุฏุณุชุฑุณ ุจู ุงุณูพุฑูุช
- **`GET /queries/tasks/by-user/{id}`**: Admin, Project Manager (ูุฑ ฺฉุณ)ุ Team Leader (ุงุนุถุง ุชู)ุ Developer (ููุท ุฎูุฏ)

---

## ๐ก ูุซุงูโูุง ุนูู

### ูุซุงู 1: Developer ุชูุงุด ุจุฑุง ุงุฌุงุฏ ุชุณฺฉ
```bash
POST /api/v1/tasks/
Authorization: Bearer <developer_token>

# ูพุงุณุฎ ุฎุทุง
{
  "detail": "You don't have permission to create tasks in this project"
}
```

### ูุซุงู 2: Team Leader ูุดุงูุฏู dashboard ุงุนุถุง ุชู
```bash
GET /api/v1/dashboard/dashboard/user/5
Authorization: Bearer <team_leader_token>

# ูพุงุณุฎ ูููู
{
  "user_info": {
    "id": 5,
    "username": "developer2",
    "role": "developer"
  },
  "tasks": {
    "my_assigned_total": 8
  }
}
```

### ูุซุงู 3: Viewer ุชูุงุด ุจุฑุง ูุฑุงุด ุชุณฺฉ
```bash
PUT /api/v1/tasks/1
Authorization: Bearer <viewer_token>

# ูพุงุณุฎ ุฎุทุง
{
  "detail": "You don't have permission to update this task"
}
```

---

## โ ฺฉุฏูุง ุฎุทุง ู ูพุงูโูุง

### ุฎุทุงูุง ุงุญุฑุงุฒ ููุช (401)
```json
{
  "detail": "Could not validate credentials"
}
```

### ุฎุทุงูุง ูุฌูุฒุฏู (403)
```json
{
  "detail": "Not enough permissions"
}
```

### ุฎุทุงูุง ุฏุณุชุฑุณ ุจู ูพุฑูฺู (403)
```json
{
  "detail": "Access denied to this project"
}
```

### ุฎุทุงูุง ุฏุณุชุฑุณ ุจู ุชุณฺฉ (403)
```json
{
  "detail": "You don't have permission to update this task"
}
```

### ุฎุทุงูุง ุฏุณุชุฑุณ ุจู ฺฉุงุฑุจุฑ (403)
```json
{
  "detail": "Access denied. You can only view your own data or your team members' data."
}
```

---

## ๐ง ูฺฉุงุช ูู ููู

### ุจุฑุฑุณ ุฏุณุชุฑุณ ุชู-ูพุฑูฺู
```python
def check_team_project_access(user: User, project: Project, db: Session) -> bool:
    if user.role in [UserRole.ADMIN, UserRole.PROJECT_MANAGER]:
        return True
    
    # ุจุฑุฑุณ ุฑูุจุฑ ุชู
    team_leader_access = db.query(Team).filter(
        Team.team_leader_id == user.id,
        Team.projects.any(Project.id == project.id)
    ).first()
    if team_leader_access:
        return True
    
    # ุจุฑุฑุณ ุนุถูุช ุฏุฑ ุชู
    member_access = db.query(Team).join(Team.members).filter(
        User.id == user.id,
        Team.projects.any(Project.id == project.id)
    ).first()
    if member_access:
        return True
    
    return False
```

### ุจุฑุฑุณ ุฏุณุชุฑุณ ุจู ุฏุงุฏูโูุง ฺฉุงุฑุจุฑ
```python
def can_access_user_data(current_user: User, target_user_id: int, db: Session) -> bool:
    if current_user.role in [UserRole.ADMIN, UserRole.PROJECT_MANAGER]:
        return True
    
    if current_user.id == target_user_id:
        return True
    
    if current_user.role == UserRole.TEAM_LEADER:
        led_teams = db.query(Team).filter(Team.team_leader_id == current_user.id).all()
        for team in led_teams:
            if any(member.id == target_user_id for member in team.members):
                return True
    
    return False
```

---

## ๐ ุฎูุงุตู ูฺฺฏโูุง ุงููุช

### โ **ุงููุช ุจุงูุง**
- ุงุญุฑุงุฒ ููุช JWT ุจุง ูุฏุช ุงุนุชุจุงุฑ 30 ุฏููู
- ูุฌูุฒุฏู ููุดโูุญูุฑ ุจุฑุง ุชูุงู API ูุง
- ุจุฑุฑุณ ุฏุณุชุฑุณ ุชู-ูพุฑูฺู
- ุฌุฏุงุณุงุฒ ุฏุงุฏูโูุง ุจุฑ ุงุณุงุณ ููุด

### โ **ุงูุนุทุงูโูพุฐุฑ**
- 6 ููุด ูุฎุชูู ุจุง ุฏุณุชุฑุณโูุง ูุดุฎุต
- ูพุดุชุจุงู ุงุฒ ุชูโูุง ูุชุนุฏุฏ
- ูุฏุฑุช ูพุฑูฺูโูุง ูพฺุฏู
- ฺฉูุชุฑู ุฏุณุชุฑุณ ุฏูู

### โ **ููุงุณโูพุฐุฑ**
- ูพุดุชุจุงู ุงุฒ ุชูโูุง ู ูพุฑูฺูโูุง ุจุฒุฑฺฏ
- ุณุณุชู ฺฏุฒุงุฑุดโุฏู ูพุดุฑูุชู
- API ูุง ุจููู ุดุฏู
- ุนููฺฉุฑุฏ ุจุงูุง

### โ **ุดูุงูุช**
- ูพุงูโูุง ุฎุทุง ูุงุถุญ ู ูุดุฎุต
- ฺฉุฏูุง ุฎุทุง ุงุณุชุงูุฏุงุฑุฏ HTTP
- ูุณุชูุฏุงุช ฺฉุงูู
- ูุซุงูโูุง ุนูู

### โ **ุนููฺฉุฑุฏ ุจููู**
- ุจุฑุฑุณโูุง ูุฌูุฒุฏู ฺฉุงุฑุขูุฏ
- ฺฉูุฆุฑโูุง ุจููู ุดุฏู
- ฺฉุดโฺฏุฐุงุฑ ููุงุณุจ
- ูพุงุณุฎโูุง ุณุฑุน

---

## ๐ฏ ูุชุฌูโฺฏุฑ

ุณุณุชู ูุฏุฑุช ุชุณฺฉ ฺฏูฺฏุง ุชฺฉ ฺฉ ุณุณุชู ุงููุช ูู ู ุงูุนุทุงูโูพุฐุฑ ุงุฑุงุฆู ูโุฏูุฏ ฺฉู:

1. **ุงููุช ฺฉุงูู**: ุงุญุฑุงุฒ ููุช ู ูุฌูุฒุฏู ูู
2. **ฺฉูุชุฑู ุฏูู**: ุฏุณุชุฑุณโูุง ูุดุฎุต ุจุฑุง ูุฑ ููุด
3. **ุงูุนุทุงูโูพุฐุฑ**: ูพุดุชุจุงู ุงุฒ ุณุงุฎุชุงุฑูุง ูพฺุฏู ุชู ู ูพุฑูฺู
4. **ููุงุณโูพุฐุฑ**: ูุงุจูุช ุฑุดุฏ ู ุชูุณุนู
5. **ุดูุงูุช**: ูุณุชูุฏุงุช ฺฉุงูู ู ูพุงูโูุง ูุงุถุญ

ุงู ุณุณุชู ุงูฺฉุงู ูุฏุฑุช ูพุฑูฺูโูุง ูพฺุฏู ุฑุง ุจุง ุญูุธ ุงููุช ู ฺฉูุชุฑู ุฏุณุชุฑุณ ูุฑุงูู ูโฺฉูุฏ ู ุจุฑุง ุณุงุฒูุงูโูุง ูุฎุชูู ูุงุจู ุงุณุชูุงุฏู ุงุณุช. 